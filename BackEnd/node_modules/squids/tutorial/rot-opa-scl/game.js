/*
==========================================================
Demonstrates how to change the rotation, opacity, and scaling
of a squid's graphics.
==============================================================
*/

// Load an image with a call-back when finished
load_image( "squid.svg", function( image ) {

	// Get the width and height of the canvas
	let width = canvas.width
	let height = canvas.height

	// Create a squid
	let squid = new Squid()

	// Attach the graphic to the squid
	squid.image = image

	// Move the squid to the center of the canvas
	squid.position = vec( width * 0.5, height * 0.5 )

	// Set rotation, opacity, and scale on each tick
	let value = 1.0

	// Change value by this amount each tick
	let amount = 0.01

	// This flag determines if we decrease or increase amount
	let decrease = true

	// Set up to listen for the "tick" event.
	// This is called approximately 100 times per second
	squid.listen( "tick", function() {

		if( decrease ) {
			value -= amount
			// if the value has gone below a certain amount
			// start increasing
			if( value < 0.2 ) {
				value = 0.2
				decrease = false
			}
		} else {
			value += amount
			// if the value has gone above a certain amount,
			// start decreasing
			if( value > 1.0 ) {
				decrease = true
				value = 1
			}
		}
		
		// Finally, set rotation, opacity, and scale to the value.

		// Rotation is in radians, which is 0 thrugh PI * 2
		squid.rotation = value

		// Opacity is 1.0 (fully opaque) to 0.0 (fully transparent)
		squid.opacity = value

		// Scale of 1.0 is normal size.
		// 0.5 is 1/2 size
		// 2.0 is double size
		squid.scale = value

	})

	// Start the ticking process so that "tick" events
	// will be dispatched to listeners
	tick( true )

}) 

